package tasks_with_tests.calculators;

import org.junit.Before;
import org.junit.Test;
import tasks_with_tests.exceptions.MyException;

import static org.junit.jupiter.api.Assertions.*;

import java.math.BigInteger;

public class FibCalculatorTest {

    private FibCalculator calculator;

    @Before
    public void initTest(){
        calculator = new FibCalculator();
    }

    @Test
    public void testValidValues() throws MyException {
        test(0,"0");
        test(1,"1");
        test(2,"1");
        test(3,"2");
        test(4,"3");
        test(5,"5");
        test(6,"8");
        test(7,"13");
        test(8,"21");
        test(9,"34");
        test(10,"55");
        test(11,"89");
        test(12,"144");
        test(13,"233");
        test(14,"377");
        test(15,"610");
        test(16,"987");
        test(17,"1597");
        test(18,"2584");
        test(19,"4181");
        test(20,"6765");
        test(21,"10946");
        test(22,"17711");
        test(23,"28657");
        test(24,"46368");
        test(25,"75025");
        test(26,"121393");
        test(27,"196418");
        test(28,"317811");
        test(29,"514229");
        test(30,"832040");
        test(31,"1346269");
        test(32,"2178309");
        test(33,"3524578");
        test(34,"5702887");
        test(35,"9227465");
        test(36,"14930352");
        test(37,"24157817");
        test(38,"39088169");
        test(39,"63245986");
        test(40,"102334155");
        test(41,"165580141");
        test(42,"267914296");
        test(43,"433494437");
        test(44,"701408733");
        test(45,"1134903170");
        test(46,"1836311903");
        test(47,"2971215073");
        test(48,"4807526976");
        test(49,"7778742049");
        test(50,"12586269025");
        test(51,"20365011074");
        test(52,"32951280099");
        test(53,"53316291173");
        test(54,"86267571272");
        test(55,"139583862445");
        test(56,"225851433717");
        test(57,"365435296162");
        test(58,"591286729879");
        test(59,"956722026041");
        test(60,"1548008755920");

        //https://ru.numberempire.com/fibonaccinumbers.php?number=10000
        test(99,"218922995834555169026");
        test(100,"354224848179261915075");
        test(101,"573147844013817084101");
        test(102,"927372692193078999176");
        test(103,"1500520536206896083277");
        test(104,"2427893228399975082453");
        test(105,"3928413764606871165730");
        test(106,"6356306993006846248183");
        test(107,"10284720757613717413913");
        test(108,"16641027750620563662096");
        test(109,"26925748508234281076009");
        test(110,"43566776258854844738105");

        //https://www.bigprimes.net/archive/fibonacci/100/
        test(111,"70492524767089125814114");
        test(112,"114059301025943970552219");
        test(113,"184551825793033096366333");
        test(114,"298611126818977066918552");
        test(115,"483162952612010163284885");
        test(116,"781774079430987230203437");
        test(117,"1264937032042997393488322");
        test(118,"2046711111473984623691759");
        test(119,"3311648143516982017180081");
        test(120,"5358359254990966640871840");
        test(121,"8670007398507948658051921");
        test(122,"14028366653498915298923761");
        test(123,"22698374052006863956975682");
        test(124,"36726740705505779255899443");
        test(125,"59425114757512643212875125");
        test(126,"96151855463018422468774568");
        test(127,"155576970220531065681649693");
        test(128,"251728825683549488150424261");
        test(129,"407305795904080553832073954");
        test(130,"659034621587630041982498215");
        test(131,"1066340417491710595814572169");
        test(132,"1725375039079340637797070384");
        test(133,"2791715456571051233611642553");
        test(134,"4517090495650391871408712937");
        test(135,"7308805952221443105020355490");

        test(999,"26863810024485359386146727202142923967616609318986952340123175997617981700247881689338369654483356564191827856161443356312976673642210350324634850410377680367334151172899169723197082763985615764450078474174626");
        test(1000,"43466557686937456435688527675040625802564660517371780402481729089536555417949051890403879840079255169295922593080322634775209689623239873322471161642996440906533187938298969649928516003704476137795166849228875");
        test(1001,"70330367711422815821835254877183549770181269836358732742604905087154537118196933579742249494562611733487750449241765991088186363265450223647106012053374121273867339111198139373125598767690091902245245323403501");
        test(1002,"113796925398360272257523782552224175572745930353730513145086634176691092536145985470146129334641866902783673042322088625863396052888690096969577173696370562180400527049497109023054114771394568040040412172632376");
        test(1003,"184127293109783088079359037429407725342927200190089245887691539263845629654342919049888378829204478636271423491563854616951582416154140320616683185749744683454267866160695248396179713539084659942285657496035877");
        test(1004,"297924218508143360336882819981631900915673130543819759032778173440536722190488904520034508163846345539055096533885943242814978469042830417586260359446115245634668393210192357419233828310479227982326069668668253");
        test(1005,"482051511617926448416241857411039626258600330733909004920469712704382351844831823569922886993050824175326520025449797859766560885196970738202943545195859929088936259370887605815413541849563887924611727164704130");
        test(1006,"779975730126069808753124677392671527174273461277728763953247886144919074035320728089957395156897169714381616559335741102581539354239801155789203904641975174723604652581079963234647370160043115906937796833372383");
        test(1007,"1262027241743996257169366534803711153432873792011637768873717598849301425880152551659880282149947993889708136584785538962348100239436771893992147449837835103812540911951967569050060912009607003831549523998076513");
        test(1008,"2042002971870066065922491212196382680607147253289366532826965484994220499915473279749837677306845163604089753144121280064929639593676573049781351354479810278536145564533047532284708282169650119738487320831448896");
        test(1009,"3304030213614062323091857747000093834040021045301004301700683083843521925795625831409717959456793157493797889728906819027277739833113344943773498804317645382348686476485015101334769194179257123570036844829525409");
        test(1010,"5346033185484128389014348959196476514647168298590370834527648568837742425711099111159555636763638321097887642873028099092207379426789917993554850158797455660884832041018062633619477476348907243308524165660974305");

        test(9995,"3033746556372140560698408927891554194528735088039323878720419408602262790778446140170493630624930501212590718443442311931919599884659061091546373510344394529095315633051695307596150858307070860378141946438785111235915052627908892575449621853298984863041759423599586871856931184653559058905889539925011402241606761264150294118735942259469288107006957804888168853422272672808947697325714549740161860424160030594194399302089550789272501941767473984989811281007267411456852818113774072169294611045542879258012083486735079885500532009833300032571469180911060583083241465135032940081004899472159649447507409512713847133445260290654147720488254076871253878383992487809728742305233570004904489911693910898560775720880140239755546285038357597094566984244294498576745327838950926549779360041792977104198496985663332537422115937998021103192452068266770713874220911829824131310360093336813868881453041997542437841644964570523965650893117548042522012667881382168179383974439538575341656506191175002693833786956979201346338389133672849978385168987434796991355776475590695015720563268253119799235117423095319514875770965764955348676930012914589730915416853763178134079568216641896450399765465436687556209723728677941123119823597932962366479349297860849810536921441755981588281031732545520593115783788196726681103355135682332695337270000950803626899095795488196181649994266649857239201166741273065147265282898508505383235172553891149361278871084307478648359994540101861702171777824734806943917453895028630551605608875621532914658117439938100168923061632058979321967713682881647324172869395419978628639839765518881717062430231310492638068302321869416970623337177490314166150120154823260838551288586278750737727395936274337335349960274473344121457528886684119410104611042688972545182806270637677486614262227956037282942983082954328110938402854806621755916770759265203608826214917958982161861243925986364481856328469793090376230908429872470519526460466028581737554025908301942203448215205069448138729330099765079093166203422771003962930953143905139940443513652554716678352812221030619552274797753076349052505");
        test(9996,"4908705041463072316905277044286576145343188639312418454080702349774658613966264789528822924351788504388858635470101844715595198165977616997680354386404649660013719494080948313763629904992594270546045378396746699312298103145881687970589714458903359508279045215380568329837505070513442735687339507961590614591633445367749938614515125287421447909959485111025421313517889402953728809647428776695540476154891201219463430611206727731710125133578570735051680757083947625242768823554602548934427851614331681662977542373726044369854997448350529199175344132238420728836979301768030021832177401563482008548663767329006363807426991407318037720572194352619822060487153886810148015784273006563089633534777489146139259410038967478710775503036603308163240951037436174339193281253251738080947383666774285864193088585368385154903341664488257716511184705621564318203997979700058305758465520583547269387242373539684372389174807625896849873931772964301951042044547789119751909944947222103563481068767585617146141040808619029409525645423298722318277970874161384613673905075666936159266366806440058806073283301208477937943648893884973069343096718072888297306906831349158945787614854946680117487232586316892221809047001241302853862906645506291239611770826949119300361612498483189661432107919597311064750788117715922912864534436441306537308113188187204724674085633862893581098606768033978172673743301187883917034518890285303693045354688859445631886380547982454789240944624111284696123936557221530214283944881799081333352850131042350888530051791686247340352636081919803692833875339134021913416459396468656892648740668865720740249173471520674341645988266754530831722694183371302246834841458281861334307387580644351476312192448715904140739422899070138402490664151977454807134062874025338329935105245558826596662726928857915411845966786908386620348212391160739915748976766932931497498466063101140444205906545941196233188738422673870093989961084336205924808655931815553971319590427359823762940569152581361944750712074392206783526928499063785543622007243714569757406340024877282479128671662615852515248336010166180041872");
        test(9997,"7942451597835212877603685972178130339871923727351742332801121758376921404744710929699316554976719005601449353913544156647514798050636678089226727896749044189109035127132643621359780763299665130924187324835531810548213155773790580546039336312202344371320804638980155201694436255167001794593229047886602016833240206631900232733251067546890736016966442915913590166940162075762676506973143326435702336579051231813657829913296278520982627075346044720041492038091215036699621641668376621103722462659874560920989625860461124255355529458183829231746813313149481311920220766903062961913182301035641657996171176841720210940872251697972185441060448429491075938871146374619876758089506576567994123446471400044700035130919107718466321788074960905257807935281730672915938609092202664630726743708567262968391585571031717692325457602486278819703636773888335032078218891529882437068825613920361138268695415537226810230819772196420815524824890512344473054712429171287931293919386760678905137574958760619839974827765598230755864034556971572296663139861596181605029681551257631174986930074693178605308400724303797452819419859649928418020026730987478028222323685112337079867183071588576567886998051753579778018770729919243976982730243439253606091120124809969110898533940239171249713139652142831657866571905912649593967889572123639232645383189138008351573181429351089762748601034683835411874910042460949064299801788793809076280527242750594993165251632289933437600939164213146398295714381956337158201398776827711884958459006663883803188169231624347509275697713978783014801589022015669237589328791888635521288580434384602457311603702831166979714290588623947802346031360861616412984961613105122172858676166923102214039588384990241476089383173543482523948193038661574217238673916714310875117911516196504083276989156813952694788949869862714731286615245967361671665747526198135106324680981060122606067150471927560715045066892466960470220869514208676444335116397844135708873616335661765966388784357650810083480042174157285876693131921834789506552960387619709697849853677431999157481483883646472067523133763242529094377");
        test(9998,"12851156639298285194508963016464706485215112366664160786881824108151580018710975719228139479328507509990307989383646001363109996216614295086907082283153693849122754621213591935123410668292259401470232703232278509860511258919672268516629050771105703879599849854360723531531941325680444530280568555848192631424873651999650171347766192834312183926925928026939011480458051478716405316620572103131242812733942433033121260524503006252692752208924615455093172795175162661942390465222979170038150314274206242583967168234187168625210526906534358430922157445387902040757200068671092983745359702599123666544834944170726574748299243105290223161632642782110897999358300261430024773873779583131083756981248889190839294540958075197177097291111564213421048886319166847255131890345454402711674127375341548832584674156400102847228799266974536536214821479509899350282216871229940742827291134503908407655937789076911182619994579822317665398756663476646424096756976960407683203864333982782468618643726346236986115868574217260165389679980270294614941110735757566218703586626924567334253296881133237411381684025512275390763068753534901487363123449060366325529230516461496025654797926535256685374230638070471999827817731160546830845636888945544845702890951759088411260146438722360911145247571740142722617360023628572506832424008564945769953496377325213076247267063213983343847207802717813584548653343648832981334320679079112769325881931610040625051632180272388226841883788324431094419650939177867372485343658626793218311309137706234691718221023310594849628333795898586707635464361149691151005788188357292413937321103250323197560777174351841321360278855378478634068725544232918659819803071386983507166063747567453690351780833706145616828806072613620926438857190639029024372736790739649205053016761755330679939716085671868106634916656771101351634827637128101587414724293131066603823147044161263050273057017868756948233805315140830564210830598544882369143772329659689680193206763021589729329353510232172028230754248549492660220060420898575050174967631334279455256193702309281636610155546262324582771469773408709136249");
        test(9999,"20793608237133498072112648988642836825087036094015903119682945866528501423455686648927456034305226515591757343297190158010624794267250973176133810179902738038231789748346235556483191431591924532394420028067810320408724414693462849062668387083308048250920654493340878733226377580847446324873797603734794648258113858631550404081017260381202919943892370942852601647398213554479081823593715429566945149312993664846779090437799284773675379284270660175134664833266377698642012106891355791141872776934080803504956794094648292880566056364718187662668970758537383352677420835574155945658542003634765324541006121012446785689171494803262408602693091211601973938229446636049901531963286159699077880427720289235539329671877182915643419079186525118678856821600897520171070499437657067342400871083908811800976259727431820539554256869460815355918458253398234382360435762759823179896116748424269545924633204614137992850814352018738480923581553988990897151469406131695614497783720743461373756218685106856826090696339815490921253714537241866911604250597353747823733268178182198509240226955826416016690084749816072843582488613184829905383150180047844353751554201573833105521980998123833253261228689824051777846588461079790807828367132384798451794011076569057522158680378961532160858387223882974380483931929541222100800313580688585002598879566463221427820448492565073106595808837401648996423563386109782045634122467872921845606409174360635618216883812562321664442822952537577492715365321134204530686742435454505103269768144370118494906390254934942358904031509877369722437053383165360388595116980245927935225901537634925654872380877183008301074569444002426436414756905094535072804764684492105680024739914490555904391369218696387092918189246157103450387050229300603241611410707453960080170928277951834763216705242485820801423866526633816082921442883095463259080471819329201710147828025221385656340207489796317663278872207607791034431700112753558813478888727503825389066823098683355695718137867882982111710796422706778536913192342733364556727928018953989153106047379741280794091639429908796650294603536651238230626");
        test(10000,"33644764876431783266621612005107543310302148460680063906564769974680081442166662368155595513633734025582065332680836159373734790483865268263040892463056431887354544369559827491606602099884183933864652731300088830269235673613135117579297437854413752130520504347701602264758318906527890855154366159582987279682987510631200575428783453215515103870818298969791613127856265033195487140214287532698187962046936097879900350962302291026368131493195275630227837628441540360584402572114334961180023091208287046088923962328835461505776583271252546093591128203925285393434620904245248929403901706233888991085841065183173360437470737908552631764325733993712871937587746897479926305837065742830161637408969178426378624212835258112820516370298089332099905707920064367426202389783111470054074998459250360633560933883831923386783056136435351892133279732908133732642652633989763922723407882928177953580570993691049175470808931841056146322338217465637321248226383092103297701648054726243842374862411453093812206564914032751086643394517512161526545361333111314042436854805106765843493523836959653428071768775328348234345557366719731392746273629108210679280784718035329131176778924659089938635459327894523777674406192240337638674004021330343297496902028328145933418826817683893072003634795623117103101291953169794607632737589253530772552375943788434504067715555779056450443016640119462580972216729758615026968443146952034614932291105970676243268515992834709891284706740862008587135016260312071903172086094081298321581077282076353186624611278245537208532365305775956430072517744315051539600905168603220349163222640885248852433158051534849622434848299380905070483482449327453732624567755879089187190803662058009594743150052402532709746995318770724376825907419939632265984147498193609285223945039707165443156421328157688908058783183404917434556270520223564846495196112460268313970975069382648706613264507665074611512677522748621598642530711298441182622661057163515069260029861704945425047491378115154139941550671256271197133252763631939606902895650288268608362241082050562430701794976171121233066073310059947366875");

    }

    @Test
    public void testInvalidValues(){

        testEx(-1);
        testEx(-2);
        testEx(-3);
        testEx(-99);
        testEx(-100);
        testEx(-101);
        testEx(-1000);
        testEx(-Integer.MAX_VALUE-1);
        testEx(-Integer.MAX_VALUE);
        testEx(10001);
        testEx(10002);
        testEx(10003);

        assertThrows(MyException.class,()->calculator.calculate(null));
    }

    private void test(int number,String result) throws MyException{

        assertEquals(calculator.calculate(BigInteger.valueOf(number)),new BigInteger(result));
    }

    private void testEx(int number){

        assertThrows(MyException.class,()->calculator.calculate(BigInteger.valueOf(number)));
    }
}